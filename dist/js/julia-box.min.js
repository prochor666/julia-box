!function(e,n){"function"==typeof define&&define.amd?define(["exports","jquery"],function(i,t){n(e.commonJsStrictGlobal=i,t)}):"object"==typeof exports&&"string"!=typeof exports.nodeName?n(exports,require("jquery")):n(e.commonJsStrictGlobal={},e.jQuery)}(this,function(n,t){var o=function(e){var n=this;e="undefined"==typeof e?{}:e;var i=Math.floor(1e7*Math.random()+1);return n.options={autoplay:!1,autoplayControls:!1,attr:"href",collection:t("a[data-julia-box] img"),debug:!1,i18n:{close:"Close",next:"Next",previous:"Previous",errorIframe:"Error, content not loaded",errorImage:"Error, image not loaded",errorInline:"Error, element not found"},iframeWidthLimit:1280,item:{},itemIndex:0,onClose:!1,onInit:!1,onCreate:!1,onNext:!1,onPrevious:!1,overlayActive:!0,root:t("body"),sources:{},thumbs:!1,timeout:7,videoAutoplay:!0},t.extend(!0,n.options,e),n.env={attr:n.options.attr,autoplay:n.options.autoplay,autoplayControls:n.options.autoplayControls,collection:n.options.collection,i18n:n.options.i18n,ID:i,collectionID:n.options.collectionID,iframeWidthLimit:n.options.iframeWidthLimit,instance:{},item:n.options.item,itemIndex:n.options.itemIndex,itemType:"inline",last:n.options.collection.length-1,mediaObj:t([]),mediaObjSize:[0,0],model:{wrapper:{},content:{},toolbar:{},buttons:{},panels:{},preloader:{}},overlayActive:n.options.overlayActive,opener:!1,overflow:n.options.root.css("overflow"),root:n.options.root,services:{image:/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,youtube:/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,vimeo:/(vimeo(pro)?\.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,googleMaps:/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,facebookVideo:/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,instagram:/(instagram\.com)\/p\/([^\/]+)\/(\?\S*)?$/i,iframe:/(http|https)?:\/\/[a-zA-Z0-9-\.]+\.[a-z]{2,4}/i},timeout:n.options.timeout,timer:!1,version:"0.5.2",videoAutoplay:n.options.videoAutoplay},n.Base={},n.Base.debug=function(e){if(n.options.debug===!0&&window.console)for(d in e)console.log(" - [Julia BOX instance: "+n.env.ID+"] "+d+" ["+typeof e[d]+"]",e[d])},n.options.debug===!0&&window.console&&console.info("=== Julia BOX console debug start, instance "+n.env.ID+" ==="),n.Ui=new n._Ui(n),n.Events=new n._Events(n),n.Callback=new n._Callback(n),n.Support=new n._Support(n),n.Media=new n._Media(n),n.Controls=new n._Controls(n),n.Events.init(),n.options.onInit!==!1&&0==n.env.itemIndex&&n.Callback.fn(n.options.onInit),n.env},a=function(e){e="undefined"==typeof e?{}:e;var n={sources:{},attr:"href",root:t("body")},i=Math.floor(1e7*Math.random()+1);t.extend(!0,n,e);var o=function(e){var n=function(e){return!!(e instanceof jQuery&&e.length||e instanceof HTMLElement)};if(e instanceof HTMLCollection&&e.length){for(var i=0,t=e.length;i<t;i++)if(!n(e[i]))return!1;return!0}return n(e)},a=function(e){var i=t("<a />");return"string"==typeof e&&i.attr(n.attr,e),"object"!=typeof e||o(e)||(e.hasOwnProperty("href")?i.attr(n.attr,e.href):e.hasOwnProperty("src")&&i.attr(n.attr,e.src),e.hasOwnProperty("title")?i.attr("title",e.title):i.attr("title","")),i.css({display:"none"}),i};_collection=t('<div class="---julia-virtual-gallery-'+i+'--- julia-virtual-gallery" style="display: none;" />');for(index in n.sources)_item=a(n.sources[index]),_collection.append(_item);return n.root.append(_collection),result=_collection.find("a").juliaBox(n),result};o.prototype._Ui=function(e){var n=this;n.create=function(){e.env.instance.lemgth>0&&e.env.instance.remove(),e.env.instance=t('<div class="julia-box julia-fullscreen-off julia-box-'+e.env.collectionID+'" id="julia-box-'+e.env.ID+'"></div>'),e.env.model.wrapper=t('<div class="julia-wrapper" id="julia-wrapper-'+e.env.ID+'"></div>'),e.env.model.content=t('<div class="julia-content" id="julia-content-'+e.env.ID+'"></div>'),e.env.model.toolbar=t('<div class="julia-toolbar" id="julia-toolbar-'+e.env.ID+'"></div>'),e.env.model.preloader=t('<div class="julia-preloader on"></div>'),e.env.model.buttons.play=t('<button class="julia-btn julia-playback play">    <i class="julia-icon julia-play"></i></button>'),e.env.model.buttons.next=t('<button class="julia-btn julia-next" title="'+e.env.i18n.next+'">    <i class="julia-icon julia-chevron-right"></i></button>'),e.env.model.buttons.previous=t('<button class="julia-btn julia-previous" title="'+e.env.i18n.previous+'">    <i class="julia-icon julia-chevron-left"></i></button>'),e.env.model.buttons.close=t('<button class="julia-btn julia-close" title="'+e.env.i18n.close+'">    <i class="julia-icon julia-close"></i></button>'),e.env.model.buttons.fullscreen=t('<button class="julia-btn julia-fullscreen-toggle">    <i class="julia-icon julia-fullscreen-on"></i></button>'),e.env.model.panels.fileName=t('<div class="julia-panel julia-file-name">    <span>{{file-name}}</span></div>'),e.env.model.panels.fileDescription=t('<div class="julia-panel julia-file-description">    <span>{{file-description}}</span></div>'),e.env.model.panels.summary=t('<div class="julia-panel julia-summary">    <span>{{summary}}</span></div>'),e.env.model.content.append([e.env.model.preloader]),e.env.last>0&&e.env.model.toolbar.append([e.env.model.buttons.previous,e.env.model.buttons.next]),e.env.model.toolbar.append([e.env.model.buttons.close]),e.env.model.wrapper.append([e.env.model.toolbar,e.env.model.content]),e.env.instance.append([e.env.model.wrapper]),n.zIndexize(),e.env.root.append(e.env.instance),e.Ui.state(e.env.instance,"","on"),n.raiseEvent("julia.ui-ready"),e.Base.debug({boxInstance:e.env.instance})},n.raiseEvent=function(i){setTimeout(function(){1==t("#julia-box-"+e.env.ID).length?t("#julia-box-"+e.env.ID).trigger({type:i}):n.raiseEvent(i)},10)},n.icon=function(e,n,i){e.find("i").removeClass(n).addClass(i)},n.state=function(e,n,i){e.removeClass(n).addClass(i)},n.panel=function(e,n){e.find("span").text(n)},n.zIndexize=function(){var n=0;t("*").each(function(){var e=parseInt(t(this).css("z-index"),10);e>n&&(n=e)}),e.Base.debug({"Highest z-index":n}),e.env.instance.css({"z-index":n+1}),e.env.model.content.css({"z-index":n+2}),e.env.model.toolbar.css({"z-index":n+3}),e.env.model.preloader.css({"z-index":n+4})}},o.prototype._Callback=function(e){var n=this;n.fn=function(n,i){i=i||{},t.inArray(typeof n,["string","function"])>-1?("string"==typeof n&&(n=window[n]),n(e.env),e.Base.debug({Callback:typeof n+" raised"})):e.Base.debug({Callback:typeof n+" is not a function, but: "+typeof n})}},o.prototype._Controls=function(e){var n=this;n.press=function(n,i){switch(i=i||{},e.env.collection.removeClass("julia-box-initiator"),e.Base.debug({action:n,"action-data":i}),n){case"play":break;case"pause":break;case"next":return clearTimeout(e.env.timer),index=e.env.itemIndex+1,index==e.env.collection.length&&(index=0),e.options.onNext!==!1&&e.Callback.fn(e.options.onNext),e.Events.keysOff(),e.env.instance.remove(),e.env.collection[index].click(),index;case"previous":return clearTimeout(e.env.timer),index=e.env.itemIndex-1,index==-1&&(index=e.env.collection.length-1),e.options.onPrevious!==!1&&e.Callback.fn(e.options.onPrevious),e.Events.keysOff(),e.env.instance.remove(),e.env.collection[index].click(),index;case"close":return clearTimeout(e.env.timer),e.options.onClose!==!1&&e.Callback.fn(e.options.onClose),e.env.instance.hide(75,function(){e.Events.keysOff(),e.env.instance.remove(),e.env.root.css({overflow:e.env.overflow}),t(".julia-virtual-gallery").remove()}),e.env.itemIndex;case"fullscreen-on":break;case"fullscreen-off":}}},o.prototype._Support=function(n){var i=this;i.aspect=function(e,n){return e>0&&n>0?n/e:0},i.isMobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile/i.test(navigator.userAgent)},i.iOS=function(){return!(!/iPad|iPhone|iPod/.test(navigator.userAgent)||window.MSStream)},i.extension=function(){return e=/[.]/.exec(n.env.item.attr(n.env.attr))?/[^.]+$/.exec(n.env.item.attr(n.env.attr)):["","undefined",""],e[0]},i.iframe=function(e,n){return t('<div class="julia-iframe-container julia-box-'+n+'"><iframe frameborder="0" width="100%" height="100%" allowfullscreen src="'+e+'"/></div>')},i.isUrlValid=function(e){return e.match("^/")},i.isDOMElement=function(e){var n=function(e){return!!(e instanceof jQuery&&e.length||e instanceof HTMLElement)};if(e instanceof HTMLCollection&&e.length){for(var i=0,t=e.length;i<t;i++)if(!n(e[i]))return!1;return!0}return n(e)}},o.prototype._Media=function(e){var n=this;n.mediaService=function(n){for(i in e.env.services)if(e.env.services[i].test(n))return i;return e.Support.isUrlValid(n)?"iframe":"inline"},n.getMedia=function(){var i="inline",o="";switch(void 0!==typeof e.env.item.attr(e.env.attr)&&e.env.item.attr(e.env.attr)!==!1&&(o=e.env.item.attr(e.env.attr),i=n.mediaService(o)),i){case"image":e.env.itemType="image",e.env.mediaObj=t('<img src="'+o+"?_c="+Math.floor(1e7*Math.random()+1)+'" alt="'+o+'">');break;case"youtube":var a=e.env.services[i].exec(o);e.env.itemType="iframe",a&&(iframeSrc="https://www.youtube"+(a[2]||"")+".com/embed/"+a[4],e.env.videoAutoplay===!0&&(iframeSrc+="?autoplay=1"),e.env.mediaObj=e.Support.iframe(iframeSrc,i));break;case"vimeo":var a=e.env.services[i].exec(o);e.env.itemType="iframe",a&&(iframeSrc="https://player.vimeo.com/video/"+a[3],e.env.videoAutoplay===!0&&(iframeSrc+="?autoplay=1"),e.env.mediaObj=e.Support.iframe(iframeSrc,i));break;case"googleMaps":var a=e.env.services[i].exec(o);e.env.itemType="iframe",a&&(iframeSrc="https://www.google."+a[3]+"/maps?"+a[6],iframeSrc+=a[6].indexOf("layer=c")>0?"&amp;output=svembed":"&amp;output=embed",e.env.mediaObj=e.Support.iframe(iframeSrc,i));break;case"instagram":var a=e.env.services[i].exec(o);e.env.itemType="iframe",a&&(iframeSrc="https://www.instagram.com/p/"+a[2]+"/embed/",e.env.mediaObj=e.Support.iframe(iframeSrc,i));break;case"facebookVideo":var a=e.env.services[i].exec(o);e.env.itemType="iframe",a&&(iframeSrc="https://www.facebook.com/plugins/video.php?href="+o,e.env.videoAutoplay===!0&&(iframeSrc+="&autoplay=1&show-captions=1"),e.env.mediaObj=e.Support.iframe(iframeSrc,i));break;case"iframe":var a=e.env.services[i].exec(o);e.env.itemType="iframe",(a||e.Support.isUrlValid(o))&&(iframeSrc=o,e.env.mediaObj=e.Support.iframe(iframeSrc,i));break;default:e.env.itemType="inline",e.Support.isDOMElement(t(o))?e.env.mediaObj=t('<div class="julia-inline-container">'+t(o).html()+"</div>"):e.env.mediaObj=t('<div class="julia-inline-container julia-error">'+e.env.i18n.errorInline+"</div>")}e.env.model.content.append(e.env.mediaObj),"inline"===e.env.itemType?(n.resize(),e.Ui.state(e.env.model.preloader,"on",""),e.Ui.state(e.env.mediaObj,"","on")):"image"===e.env.itemType?e.env.mediaObj.on("load error",function(i){"error"!=i.type&&"undefined"!==t(this).width()&&0!==t(this).width()||(e.env.mediaObj=t('<div class="julia-inline-container julia-error">'+e.env.i18n.errorImage+"</div>"),e.env.model.content.html(e.env.mediaObj)),n.resize(),e.Ui.state(e.env.model.preloader,"on",""),e.Ui.state(e.env.mediaObj,"","on")}):(loaderEventHandler=e.env.mediaObj.find("iframe"),loaderEventHandler.on("load error",function(i){"error"==i.type&&(e.env.mediaObj=t('<div class="julia-inline-container julia-error">'+e.env.i18n.errorIframe+"</div>"),e.env.model.content.html(e.env.mediaObj)),n.resize(),e.Ui.state(e.env.model.preloader,"on",""),e.Ui.state(e.env.mediaObj,"","on")}))},n.resize=function(){mediaSize=n.setSize(),e.env.mediaObj.width(mediaSize[0]),e.env.mediaObj.height(mediaSize[1]),e.env.mediaObj.css({"margin-top":(mediaSize[3]-mediaSize[1])/2+"px"}),e.Base.debug({extension:e.Support.extension(),item:e.env.item,itemType:typeof e.env.item,mediaObj:e.env.mediaObj,mediaSize:mediaSize})},n.setSize=function(){var i=t(window).width(),o=t(window).height(),a=e.env.mediaObjSize[0],r=e.env.mediaObjSize[1];return 0!=a&&0!=r||e.env.mediaObj.hasClass("julia-error")||(a="iframe"===e.env.itemType||"inline"===e.env.itemType?1280:e.env.mediaObj.width(),r="iframe"===e.env.itemType||"inline"===e.env.itemType?720:e.env.mediaObj.height(),e.env.mediaObjSize=[a,r]),ta=e.Support.aspect(a,r),a>=i&&(a=i-20,("iframe"===e.env.itemType||"inline"===e.env.itemType)&&a>e.env.iframeWidthLimit&&(a=e.env.iframeWidthLimit),r=a*ta),r>=o-20&&(r=o-10,a=r/ta),mediaService=n.mediaService(e.env.item.attr(e.env.attr)),"instagram"===mediaService&&(a=r-100,i<400&&i<o&&(a+=100,r+=100)),a=parseInt(a,10),r=parseInt(r,10),e.Base.debug({window:[i,o],mediaObj:[a,r]}),[a,r,i,o]}},o.prototype._Events=function(e){var n=this;n.init=function(){e.env.item.on("click",function(n){n.preventDefault(),e.env.root.css({overflow:"hidden"}),e.Ui.create(),e.Events.ui(),t("#julia-box-"+e.env.ID).on("julia.ui-ready",function(){e.Media.getMedia(),e.env.item.addClass("julia-box-initiator"),e.options.onCreate!==!1&&e.Callback.fn(e.options.onCreate)}),e.env.model.buttons.close.focus(),e.env.autoplay===!0&&(e.env.timer=setTimeout(function(){e.Controls.press("next")},1e3*e.env.timeout))})},n.keysOff=function(){e.env.root.off("keydown"),e.env.model.buttons.close.off("click"),e.env.model.buttons.previous.off("click"),e.env.model.buttons.next.off("click")},n.ui=function(){e.env.model.content.on("click",function(n){n.stopPropagation(),t(n.target).is(".julia-content")&&e.options.overlayActive===!0&&e.Controls.press("close")}),e.env.model.buttons.close.on("click",function(n){n.preventDefault(),e.Controls.press("close")}),e.env.model.buttons.previous.on("click",function(n){n.preventDefault(),e.Controls.press("previous")}),e.env.model.buttons.next.on("click",function(n){n.preventDefault(),e.Controls.press("next")}),e.env.root.on("keydown",function(n){27===n.keyCode&&e.Controls.press("close"),37===n.keyCode&&e.Controls.press("previous"),39===n.keyCode&&e.Controls.press("next")});var n,i=!1,o=10,a=function(){new Date-n<o?setTimeout(a,o):(i=!1,e.Media.resize())};t(window).on("resize",function(){n=new Date,i===!1&&(i=!0,setTimeout(a,o))})}},function(e){e.extend({juliaBox:function(e){return new a(e)}})}(t),t.fn.juliaBox=function(e){var n=this,i={},a=Math.floor(1e7*Math.random()+1),r="julia-box-"+a;return this.each(function(i){if(!t(this).data("juliabox")){e="undefined"==typeof e?{}:e,e.collection=n,e.collectionID=a,e.item=t(this),e.itemIndex=i;var r=new o(e);t(this).addClass("julia-box-collection-"+a).data({juliabox:r,"juliabox-index":i,"juliabox-collection":a})}}),i.next=function(){t("."+r).find("button.julia-next").click()},i.prev=function(){t("."+r).find("button.julia-previous").click()},i.close=function(){t("."+r).find("button.julia-close").click()},i.open=function(){n[0].click()},i}});